<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      .hidden{
          display:none;
      }
    </style>
</head>

<body>

<div class="container">
    <label for="quantity">Введите количество товара:</label>
    <input type="number" class="input-form" id="quantity" value="1" min="1">
    <br>
    <br>
    <label>Выберите тип услуги:</label>
    <div id="productTypes">
        <label><input type="radio" name="productType" value="type1" checked>Тип 1</label>
        <label><input type="radio" name="productType" value="type2">Тип 2</label>
        <label><input type="radio" name="productType" value="type3">Тип 3</label>
    </div>

    <div id="optionsContainer" class="options hidden">
        <label for="productOptions">Выберите опцию:</label>
        <select class="custom-select" id="productOptions">
            <option value="option1">Опция 1 (+50 руб.)</option>
            <option value="option2">Опция 2 (+100 руб.)</option>
        </select>
    </div>
    <br>
    <div id="propertiesContainer" class="properties hidden">
        <label><input type="checkbox" id="productProperty" value="property1">Свойство (+75 руб.)</label>
    </div>
    <br>
    <div id="result"></div>
</div>

<script>
    const quantityInput = document.getElementById("quantity");
    const productTypeRadios = document.querySelectorAll('input[name="productType"]');
    const optionsContainer = document.getElementById("optionsContainer");
    const productOptionsSelect = document.getElementById("productOptions");
    const propertiesContainer = document.getElementById("propertiesContainer");
    const productPropertyCheckbox = document.getElementById("productProperty");
    const resultDiv = document.getElementById("result");

    let currentProductType = "type1";

    function updateOptionsAndProperties() {
        optionsContainer.classList.add("hidden");
        propertiesContainer.classList.add("hidden");

        if (currentProductType === "type2") {
            optionsContainer.classList.remove("hidden");
        } else if (currentProductType === "type3") {
            propertiesContainer.classList.remove("hidden");
        }
    }

    productTypeRadios.forEach(radio => {
        radio.addEventListener("change", function () {
            currentProductType = this.value;
            updateOptionsAndProperties();
            calculatePrice();
        });
    });

    function calculatePrice() {
        const quantity = parseInt(quantityInput.value);

        if (isNaN(quantity) || quantity <= 0) {
            resultDiv.textContent = "Ошибка: Введите корректное количество.";
            return;
        }

        let basePrice = 0;

        if (currentProductType === "type1") {
            basePrice = 100;
        } else if (currentProductType === "type2") {
            basePrice = 200;
        } else if (currentProductType === "type3"){
            basePrice = 300;
        }

        let additionalCost = 0;

        if (currentProductType === "type2" && !optionsContainer.classList.contains("hidden")) {
            const selectedOption = productOptionsSelect.value;
            if (selectedOption === "option1") {
                additionalCost += 50;
            } else if (selectedOption === "option2") {
                additionalCost += 100;
            }
        }
        if (currentProductType === "type3" && !propertiesContainer.classList.contains("hidden")) {
            if (productPropertyCheckbox.checked) {
                additionalCost += 75;
            }
        }

        const totalPrice = quantity * (basePrice + additionalCost);
        resultDiv.textContent = `Стоимость заказа: ${totalPrice} руб. (${basePrice}шт)`;
    }

    quantityInput.addEventListener("input", calculatePrice);
    productOptionsSelect.addEventListener("change", calculatePrice);
    productPropertyCheckbox.addEventListener("change", calculatePrice);

    window.addEventListener('DOMContentLoaded', function () {
        updateOptionsAndProperties();
        calculatePrice();
    });
</script>
</body>
</html>
